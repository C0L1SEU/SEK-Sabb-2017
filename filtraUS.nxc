#define INSENSIBILIDADE 0.9

float valor;

float FiltraUS(byte sensor) {
    int i;
    float aux;
    aux = SensorUS(sensor);
    valor = valor * INSENSIBILIDADE + aux * (1-INSENSIBILIDADE);
    return valor;
}

task main(){
    SetSensorUltrasonic(IN_1);
    while(1){
        ClearLine(LCD_LINE1);
        TextOut(0, LCD_LINE3, "DIST:");
        NumOut(48, LCD_LINE3, FiltraUS(IN_1));
    }
}